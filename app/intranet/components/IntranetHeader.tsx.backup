'use client'

import { useRouter } from 'next/navigation'
import { useEffect, useState } from 'react'
import Link from 'next/link'

export default function IntranetHeader() {
  const router = useRouter()
  const [userName, setUserName] = useState('Utilisateur')
  const [isAdmin, setIsAdmin] = useState(false)
  
  // Ã‰tats pour les menus dÃ©roulants
  const [crmOpen, setCrmOpen] = useState(false)
  const [financesOpen, setFinancesOpen] = useState(false)
  const [comptabiliteOpen, setComptabiliteOpen] = useState(false)
  const [stockFlotteOpen, setStockFlotteOpen] = useState(false)
  const [operationsOpen, setOperationsOpen] = useState(false)
  const [conformiteOpen, setConformiteOpen] = useState(false)
  const [adminMenuOpen, setAdminMenuOpen] = useState(false)
  
  // NOUVEAU : Ã‰tat pour le menu mobile
  const [mobileMenuOpen, setMobileMenuOpen] = useState(false)

  useEffect(() => {
    const name = localStorage.getItem('user_name')
    if (name) setUserName(name)
    
    const userRole = localStorage.getItem('user_role')
    setIsAdmin(userRole === 'admin')
  }, [])

  const handleLogout = () => {
    localStorage.removeItem('intranet_logged_in')
    localStorage.removeItem('user_name')
    localStorage.removeItem('user_role')
    router.push('/intranet/login')
  }

  const closeAllMenus = () => {
    setCrmOpen(false)
    setFinancesOpen(false)
    setComptabiliteOpen(false)
    setStockFlotteOpen(false)
    setOperationsOpen(false)
    setConformiteOpen(false)
    setAdminMenuOpen(false)
  }
  
  const closeMobileMenu = () => {
    setMobileMenuOpen(false)
    closeAllMenus()
  }

  return (
    <header className="bg-[#1e3a8a] border-b border-[#1e3a8a]/20 sticky top-0 z-50">
      <div className="max-w-[1800px] mx-auto px-4 sm:px-6 py-3 flex justify-between items-center">
        
        {/* GAUCHE : Burger Mobile + Logo */}
        <div className="flex items-center gap-3">
          {/* Bouton Burger - VISIBLE uniquement sur mobile/tablette */}
          <button
            onClick={() => setMobileMenuOpen(!mobileMenuOpen)}
            className="lg:hidden text-white p-2 hover:bg-white/10 rounded transition-colors"
            aria-label="Menu"
          >
            <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              {mobileMenuOpen ? (
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
              ) : (
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 6h16M4 12h16M4 18h16" />
              )}
            </svg>
          </button>

          {/* Logo */}
          <Link href="/intranet/dashboard" className="flex items-center gap-2 sm:gap-3">
            <div className="w-8 h-8 sm:w-10 sm:h-10 bg-white flex items-center justify-center text-[#1e3a8a] font-bold rounded text-sm sm:text-base">
              SN
            </div>
            <span className="hidden sm:inline text-base font-semibold text-white">Solaire Nettoyage</span>
          </Link>
          <span className="hidden sm:inline bg-yellow-500 text-[#1e3a8a] px-3 py-1 rounded text-xs font-bold uppercase tracking-wide">
            Intranet
          </span>
        </div>

        {/* CENTRE : Navigation Desktop - MASQUÃ‰E sur mobile/tablette */}
        <nav className="hidden lg:flex items-center gap-5">
          
          {/* ğŸ  ACCUEIL */}
          <Link 
            href="/intranet/dashboard" 
            className="text-sm font-medium text-gray-300 hover:text-white transition-colors"
          >
            ğŸ  Accueil
          </Link>

          {/* ğŸ’¼ CRM CLIENTS - ADMIN UNIQUEMENT */}
          {isAdmin && (
            <div className="relative">
              <button
                onClick={() => {
                  setCrmOpen(!crmOpen)
                  setFinancesOpen(false)
                  setComptabiliteOpen(false)
                  setStockFlotteOpen(false)
                  setOperationsOpen(false)
                  setConformiteOpen(false)
                  setAdminMenuOpen(false)
                }}
                className="flex items-center gap-1 text-sm font-medium text-gray-300 hover:text-white transition-colors"
              >
                ğŸ’¼ CRM Clients
                <svg className={`w-4 h-4 transition-transform ${crmOpen ? 'rotate-180' : ''}`} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 9l-7 7-7-7" />
                </svg>
              </button>
              
              {crmOpen && (
                <div className="absolute top-full left-0 mt-2 w-64 bg-white rounded-lg shadow-xl py-2 border border-gray-200">
                  <Link href="/admin/gestion-groupes" onClick={closeAllMenus} className="block px-4 py-2 text-sm text-gray-900 hover:bg-blue-50 hover:text-blue-600">
                    ğŸ¢ Groupes
                  </Link>
                  <Link href="/admin/gestion-clients" onClick={closeAllMenus} className="block px-4 py-2 text-sm text-gray-900 hover:bg-blue-50 hover:text-blue-600">
                    ğŸ‘¥ Clients (600+)
                  </Link>
                  <Link href="/admin/gestion-sites" onClick={closeAllMenus} className="block px-4 py-2 text-sm text-gray-900 hover:bg-blue-50 hover:text-blue-600">
                    ğŸ“ Sites (3600)
                  </Link>
                  <div className="border-t border-gray-200 my-1"></div>
                  <Link href="/admin/import-sites" onClick={closeAllMenus} className="block px-4 py-2 text-sm text-gray-900 hover:bg-blue-50 hover:text-blue-600">
                    ğŸ“¥ Import Sites Excel
                  </Link>
                  <div className="px-4 py-2 text-xs text-gray-500 italic">
                    ğŸ“„ Contrats (Ã  venir)
                  </div>
                </div>
              )}
            </div>
          )}

          {/* ğŸ’° FINANCES - ADMIN UNIQUEMENT */}
          {isAdmin && (
            <div className="relative">
              <button
                onClick={() => {
                  setFinancesOpen(!financesOpen)
                  setCrmOpen(false)
                  setComptabiliteOpen(false)
                  setStockFlotteOpen(false)
                  setOperationsOpen(false)
                  setConformiteOpen(false)
                  setAdminMenuOpen(false)
                }}
                className="flex items-center gap-1 text-sm font-medium text-gray-300 hover:text-white transition-colors"
              >
                ğŸ’° Finances
                <svg className={`w-4 h-4 transition-transform ${financesOpen ? 'rotate-180' : ''}`} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 9l-7 7-7-7" />
                </svg>
              </button>
              
              {financesOpen && (
                <div className="absolute top-full left-0 mt-2 w-72 bg-white rounded-lg shadow-xl py-2 border border-gray-200">
                  <Link href="/admin/devis" onClick={closeAllMenus} className="block px-4 py-2 text-sm text-gray-900 hover:bg-blue-50 hover:text-blue-600">
                    ğŸ“ Devis
                  </Link>
                  <Link href="/admin/finances/factures" onClick={closeAllMenus} className="block px-4 py-2 text-sm text-gray-900 hover:bg-blue-50 hover:text-blue-600">
                    ğŸ“„ Factures
                  </Link>
                  <Link href="/admin/finances/avoirs" onClick={closeAllMenus} className="block px-4 py-2 text-sm text-gray-900 hover:bg-blue-50 hover:text-blue-600">
                    ğŸ”´ Avoirs
                  </Link>
                  <Link href="/admin/finances/relances" onClick={closeAllMenus} className="block px-4 py-2 text-sm text-gray-900 hover:bg-blue-50 hover:text-blue-600">
                    ğŸ“§ Relances Automatiques
                  </Link>
                  <div className="border-t border-gray-200 my-1"></div>
                  <Link href="/admin/tarification" onClick={closeAllMenus} className="block px-4 py-2 text-sm text-gray-900 hover:bg-blue-50 hover:text-blue-600">
                    ğŸ’° Tarification
                  </Link>
                  <div className="border-t border-gray-200 my-1"></div>
                  <Link href="/admin/tresorerie" onClick={closeAllMenus} className="block px-4 py-2 text-sm text-gray-900 hover:bg-blue-50 hover:text-blue-600">
                    ğŸ¦ TrÃ©sorerie
                  </Link>
                  <Link href="/admin/finances/notes-frais" onClick={closeAllMenus} className="block px-4 py-2 text-sm text-gray-900 hover:bg-blue-50 hover:text-blue-600">
                    ğŸ’³ Notes de Frais
                  </Link>
                  <Link href="/admin/finances/categories" onClick={closeAllMenus} className="block px-4 py-2 text-sm text-gray-900 hover:bg-blue-50 hover:text-blue-600">
                    ğŸ—‚ï¸ CatÃ©gories DÃ©penses
                  </Link>
                  <Link href="/admin/finances/fournisseurs" onClick={closeAllMenus} className="block px-4 py-2 text-sm text-gray-900 hover:bg-blue-50 hover:text-blue-600">
                    ğŸ­ Fournisseurs
                  </Link>
                  <Link href="/admin/finances/charges" onClick={closeAllMenus} className="block px-4 py-2 text-sm text-gray-900 hover:bg-blue-50 hover:text-blue-600">
                    ğŸ’¸ Charges Fixes
                  </Link>
                </div>
              )}
            </div>
          )}

          {/* ğŸ“Š COMPTABILITÃ‰ - ADMIN UNIQUEMENT */}
          {isAdmin && (
            <div className="relative">
              <button
                onClick={() => {
                  setComptabiliteOpen(!comptabiliteOpen)
                  setCrmOpen(false)
                  setFinancesOpen(false)
                  setStockFlotteOpen(false)
                  setOperationsOpen(false)
                  setConformiteOpen(false)
                  setAdminMenuOpen(false)
                }}
                className="flex items-center gap-1 text-sm font-medium text-gray-300 hover:text-white transition-colors"
              >
                ğŸ“Š ComptabilitÃ©
                <svg className={`w-4 h-4 transition-transform ${comptabiliteOpen ? 'rotate-180' : ''}`} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 9l-7 7-7-7" />
                </svg>
              </button>
              
              {comptabiliteOpen && (
                <div className="absolute top-full left-0 mt-2 w-72 bg-white rounded-lg shadow-xl py-2 border border-gray-200">
                  <Link href="/admin/comptabilite" onClick={closeAllMenus} className="block px-4 py-2 text-sm text-gray-900 hover:bg-blue-50 hover:text-blue-600 font-semibold">
                    ğŸ“Š Dashboard ComptabilitÃ©
                  </Link>
                  <div className="border-t border-gray-200 my-1"></div>
                  <Link href="/admin/comptabilite/plan-comptable" onClick={closeAllMenus} className="block px-4 py-2 text-sm text-gray-900 hover:bg-blue-50 hover:text-blue-600">
                    ğŸ“š Plan Comptable
                  </Link>
                  <Link href="/admin/comptabilite/journal" onClick={closeAllMenus} className="block px-4 py-2 text-sm text-gray-900 hover:bg-blue-50 hover:text-blue-600">
                    ğŸ“– Journal
                  </Link>
                  <Link href="/admin/comptabilite/grand-livre" onClick={closeAllMenus} className="block px-4 py-2 text-sm text-gray-900 hover:bg-blue-50 hover:text-blue-600">
                    ğŸ“— Grand Livre
                  </Link>
                  <Link href="/admin/comptabilite/balance" onClick={closeAllMenus} className="block px-4 py-2 text-sm text-gray-900 hover:bg-blue-50 hover:text-blue-600">
                    âš–ï¸ Balance
                  </Link>
                  <div className="border-t border-gray-200 my-1"></div>
                  <Link href="/admin/comptabilite/tva" onClick={closeAllMenus} className="block px-4 py-2 text-sm text-gray-900 hover:bg-blue-50 hover:text-blue-600">
                    ğŸ’¶ TVA
                  </Link>
                  <Link href="/admin/comptabilite/tva/ca3" onClick={closeAllMenus} className="block px-4 py-2 text-sm text-gray-900 hover:bg-blue-50 hover:text-blue-600">
                    ğŸ“‹ DÃ©claration CA3
                  </Link>
                  <div className="border-t border-gray-200 my-1"></div>
                  <Link href="/admin/comptabilite/factures-fournisseurs" onClick={closeAllMenus} className="block px-4 py-2 text-sm text-gray-900 hover:bg-blue-50 hover:text-blue-600">
                    ğŸ“„ Factures Fournisseurs
                  </Link>
                  <Link href="/admin/comptabilite/exports/fec" onClick={closeAllMenus} className="block px-4 py-2 text-sm text-gray-900 hover:bg-blue-50 hover:text-blue-600">
                    ğŸ’¾ Export FEC
                  </Link>
                </div>
              )}
            </div>
          )}

          {/* ğŸ“¦ STOCK & FLOTTE - ADMIN UNIQUEMENT */}
          {isAdmin && (
            <div className="relative">
              <button
                onClick={() => {
                  setStockFlotteOpen(!stockFlotteOpen)
                  setCrmOpen(false)
                  setFinancesOpen(false)
                  setComptabiliteOpen(false)
                  setOperationsOpen(false)
                  setConformiteOpen(false)
                  setAdminMenuOpen(false)
                }}
                className="flex items-center gap-1 text-sm font-medium text-gray-300 hover:text-white transition-colors"
              >
                ğŸ“¦ Stock & Flotte
                <svg className={`w-4 h-4 transition-transform ${stockFlotteOpen ? 'rotate-180' : ''}`} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 9l-7 7-7-7" />
                </svg>
              </button>
              
              {stockFlotteOpen && (
                <div className="absolute top-full left-0 mt-2 w-72 bg-white rounded-lg shadow-xl py-2 border border-gray-200">
                  <Link href="/admin/stock-flotte" onClick={closeAllMenus} className="block px-4 py-2 text-sm text-gray-900 hover:bg-blue-50 hover:text-blue-600">
                    ğŸ“Š Dashboard
                  </Link>
                  <div className="border-t border-gray-200 my-1"></div>
                  <Link href="/admin/stock-flotte/articles" onClick={closeAllMenus} className="block px-4 py-2 text-sm text-gray-900 hover:bg-blue-50 hover:text-blue-600">
                    ğŸ“¦ Articles
                  </Link>
                  <Link href="/admin/stock-flotte/mouvements" onClick={closeAllMenus} className="block px-4 py-2 text-sm text-gray-900 hover:bg-blue-50 hover:text-blue-600">
                    ğŸ“Š Mouvements
                  </Link>
                  <Link href="/admin/stock-flotte/alertes" onClick={closeAllMenus} className="block px-4 py-2 text-sm text-gray-900 hover:bg-blue-50 hover:text-blue-600">
                    âš ï¸ Alertes Stock
                  </Link>
                  <Link href="/admin/stock-flotte/affectations" onClick={closeAllMenus} className="block px-4 py-2 text-sm text-gray-900 hover:bg-blue-50 hover:text-blue-600">
                    ğŸ”— Affectations
                  </Link>
                  <div className="border-t border-gray-200 my-1"></div>
                  <Link href="/admin/stock-flotte/equipements" onClick={closeAllMenus} className="block px-4 py-2 text-sm text-gray-900 hover:bg-blue-50 hover:text-blue-600">
                    ğŸš— Ã‰quipements
                  </Link>
                  <Link href="/admin/stock-flotte/interventions" onClick={closeAllMenus} className="block px-4 py-2 text-sm text-gray-900 hover:bg-blue-50 hover:text-blue-600">
                    ğŸ”§ Interventions Maintenance
                  </Link>
                  <div className="border-t border-gray-200 my-1"></div>
                  <Link href="/admin/stock-flotte/bons-commande" onClick={closeAllMenus} className="block px-4 py-2 text-sm text-gray-900 hover:bg-blue-50 hover:text-blue-600">
                    ğŸ“‹ Bons Commande
                  </Link>
                  <Link href="/admin/stock-flotte/factures-fournisseurs" onClick={closeAllMenus} className="block px-4 py-2 text-sm text-gray-900 hover:bg-blue-50 hover:text-blue-600">
                    ğŸ“„ Factures Fournisseurs
                  </Link>
                </div>
              )}
            </div>
          )}

          {/* ğŸš€ OPÃ‰RATIONS - TOUS */}
          <div className="relative">
            <button
              onClick={() => {
                setOperationsOpen(!operationsOpen)
                setCrmOpen(false)
                setFinancesOpen(false)
                setComptabiliteOpen(false)
                setStockFlotteOpen(false)
                setConformiteOpen(false)
                setAdminMenuOpen(false)
              }}
              className="flex items-center gap-1 text-sm font-medium text-gray-300 hover:text-white transition-colors"
            >
              ğŸš€ OpÃ©rations
              <svg className={`w-4 h-4 transition-transform ${operationsOpen ? 'rotate-180' : ''}`} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 9l-7 7-7-7" />
              </svg>
            </button>
            
            {operationsOpen && (
              <div className="absolute top-full left-0 mt-2 w-64 bg-white rounded-lg shadow-xl py-2 border border-gray-200">
                <Link href="/admin/calendrier" onClick={closeAllMenus} className="block px-4 py-2 text-sm text-gray-900 hover:bg-blue-50 hover:text-blue-600">
                  ğŸ“… Planning Interventions
                </Link>
                <Link href="/admin/nouvelle-intervention" onClick={closeAllMenus} className="block px-4 py-2 text-sm text-gray-900 hover:bg-blue-50 hover:text-blue-600">
                  â• Nouvelle Intervention
                </Link>
                <Link href="/admin/interventions" onClick={closeAllMenus} className="block px-4 py-2 text-sm text-gray-900 hover:bg-blue-50 hover:text-blue-600">
                  ğŸ“„ Liste Interventions
                </Link>
                {isAdmin && (
                  <>
                    <div className="border-t border-gray-200 my-1"></div>
                    <Link href="/admin/gestion-equipes" onClick={closeAllMenus} className="block px-4 py-2 text-sm text-gray-900 hover:bg-blue-50 hover:text-blue-600">
                      ğŸ‘· Ã‰quipes & OpÃ©rateurs
                    </Link>
                  </>
                )}
              </div>
            )}
          </div>

          {/* ğŸ“ CONFORMITÃ‰ - TOUS */}
          <div className="relative">
            <button
              onClick={() => {
                setConformiteOpen(!conformiteOpen)
                setCrmOpen(false)
                setFinancesOpen(false)
                setComptabiliteOpen(false)
                setStockFlotteOpen(false)
                setOperationsOpen(false)
                setAdminMenuOpen(false)
              }}
              className="flex items-center gap-1 text-sm font-medium text-gray-300 hover:text-white transition-colors"
            >
              ğŸ“ ConformitÃ©
              <svg className={`w-4 h-4 transition-transform ${conformiteOpen ? 'rotate-180' : ''}`} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 9l-7 7-7-7" />
              </svg>
            </button>
            
            {conformiteOpen && (
              <div className="absolute top-full left-0 mt-2 w-64 bg-white rounded-lg shadow-xl py-2 border border-gray-200">
                <Link href="/intranet/certifications" onClick={closeAllMenus} className="block px-4 py-2 text-sm text-gray-900 hover:bg-blue-50 hover:text-blue-600">
                  ğŸ“ Certifications CACES/MÃ©dical
                </Link>
                <Link href="/intranet/extincteurs" onClick={closeAllMenus} className="block px-4 py-2 text-sm text-gray-900 hover:bg-blue-50 hover:text-blue-600">
                  ğŸ§¯ Extincteurs
                </Link>
                <div className="px-4 py-2 text-xs text-gray-500 italic">
                  ğŸ“‹ Documents LÃ©gaux (Ã  venir)
                </div>
              </div>
            )}
          </div>

          {/* âš™ï¸ ADMINISTRATION - ADMIN UNIQUEMENT */}
          {isAdmin && (
            <div className="relative">
              <button
                onClick={() => {
                  setAdminMenuOpen(!adminMenuOpen)
                  setCrmOpen(false)
                  setFinancesOpen(false)
                  setComptabiliteOpen(false)
                  setStockFlotteOpen(false)
                  setOperationsOpen(false)
                  setConformiteOpen(false)
                }}
                className="flex items-center gap-1 text-sm font-medium text-gray-300 hover:text-white transition-colors"
              >
                âš™ï¸ Admin
                <svg className={`w-4 h-4 transition-transform ${adminMenuOpen ? 'rotate-180' : ''}`} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 9l-7 7-7-7" />
                </svg>
              </button>
              
              {adminMenuOpen && (
                <div className="absolute top-full left-0 mt-2 w-72 bg-white rounded-lg shadow-xl py-2 border border-gray-200">
                  <Link href="/admin/gely" onClick={closeAllMenus} className="block px-4 py-2 text-sm text-gray-900 hover:bg-blue-50 hover:text-blue-600">
                    ğŸ¢ GELY Management
                  </Link>
                  <Link href="/admin/administration/societes" onClick={closeAllMenus} className="block px-4 py-2 text-sm text-gray-900 hover:bg-blue-50 hover:text-blue-600">
                    ğŸ›ï¸ SociÃ©tÃ©s
                  </Link>
                  <Link href="/admin/parametres-entreprise" onClick={closeAllMenus} className="block px-4 py-2 text-sm text-gray-900 hover:bg-blue-50 hover:text-blue-600">
                    ğŸ¢ ParamÃ¨tres Entreprise
                  </Link>
                  <Link href="/admin/articles" onClick={closeAllMenus} className="block px-4 py-2 text-sm text-gray-900 hover:bg-blue-50 hover:text-blue-600">
                    ğŸ“¦ Catalogue Articles
                  </Link>
                  <div className="border-t border-gray-200 my-1"></div>
                  <Link href="/admin/demandes-modifications" onClick={closeAllMenus} className="block px-4 py-2 text-sm text-gray-900 hover:bg-blue-50 hover:text-blue-600">
                    ğŸ“¨ Demandes Clients
                  </Link>
                </div>
              )}
            </div>
          )}

          {/* ğŸŒ Site public */}
          <Link href="/" className="text-sm font-medium text-yellow-500 hover:text-yellow-400 transition-colors">
            ğŸŒ Site public
          </Link>
        </nav>

        {/* DROITE : Menu utilisateur - TOUJOURS VISIBLE */}
        <div className="flex items-center gap-2 sm:gap-3">
          <div className="flex items-center gap-2 px-2 sm:px-4 py-2 bg-white/10 rounded-lg">
            <div className="w-7 h-7 sm:w-8 sm:h-8 rounded-full bg-yellow-500 text-[#1e3a8a] flex items-center justify-center font-bold text-xs sm:text-sm">
              {userName.charAt(0).toUpperCase()}
            </div>
            <span className="hidden sm:inline text-sm font-semibold text-white">{userName}</span>
            <button
              onClick={handleLogout}
              className="text-xs text-gray-300 hover:text-red-400 transition-colors font-semibold"
              title="Se dÃ©connecter"
            >
              âš ï¸
            </button>
          </div>
        </div>
      </div>

      {/* MENU MOBILE SLIDE-OUT - VISIBLE uniquement quand ouvert */}
      {mobileMenuOpen && (
        <>
          {/* Overlay noir transparent */}
          <div 
            className="fixed inset-0 bg-black/50 z-40 lg:hidden"
            onClick={closeMobileMenu}
          ></div>
          
          {/* Menu slide */}
          <div className="fixed top-0 left-0 h-full w-80 max-w-[85vw] bg-white shadow-2xl z-50 lg:hidden overflow-y-auto">
            {/* Header du menu */}
            <div className="bg-[#1e3a8a] p-4 flex justify-between items-center">
              <div className="flex items-center gap-2">
                <div className="w-10 h-10 bg-white flex items-center justify-center text-[#1e3a8a] font-bold rounded">
                  SN
                </div>
                <div>
                  <div className="text-white font-semibold text-sm">Solaire Nettoyage</div>
                  <div className="text-yellow-400 text-xs">Intranet</div>
                </div>
              </div>
              <button onClick={closeMobileMenu} className="text-white p-2">
                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                </svg>
              </button>
            </div>

            {/* Contenu menu mobile */}
            <div className="p-4 space-y-2">
              <Link 
                href="/intranet/dashboard" 
                onClick={closeMobileMenu}
                className="block py-3 px-4 text-gray-900 hover:bg-blue-50 rounded-lg font-medium"
              >
                ğŸ  Accueil
              </Link>

              {isAdmin && (
                <>
                  {/* CRM */}
                  <div className="border-t pt-2 mt-2">
                    <div className="text-xs font-semibold text-gray-500 px-4 mb-2">ğŸ’¼ CRM CLIENTS</div>
                    <Link href="/admin/gestion-groupes" onClick={closeMobileMenu} className="block py-2 px-4 text-sm text-gray-700 hover:bg-blue-50 rounded-lg">
                      ğŸ¢ Groupes
                    </Link>
                    <Link href="/admin/gestion-clients" onClick={closeMobileMenu} className="block py-2 px-4 text-sm text-gray-700 hover:bg-blue-50 rounded-lg">
                      ğŸ‘¥ Clients (600+)
                    </Link>
                    <Link href="/admin/gestion-sites" onClick={closeMobileMenu} className="block py-2 px-4 text-sm text-gray-700 hover:bg-blue-50 rounded-lg">
                      ğŸ“ Sites (3600)
                    </Link>
                    <Link href="/admin/import-sites" onClick={closeMobileMenu} className="block py-2 px-4 text-sm text-gray-700 hover:bg-blue-50 rounded-lg">
                      ğŸ“¥ Import Sites Excel
                    </Link>
                  </div>

                  {/* Finances */}
                  <div className="border-t pt-2 mt-2">
                    <div className="text-xs font-semibold text-gray-500 px-4 mb-2">ğŸ’° FINANCES</div>
                    <Link href="/admin/devis" onClick={closeMobileMenu} className="block py-2 px-4 text-sm text-gray-700 hover:bg-blue-50 rounded-lg">
                      ğŸ“ Devis
                    </Link>
                    <Link href="/admin/finances/factures" onClick={closeMobileMenu} className="block py-2 px-4 text-sm text-gray-700 hover:bg-blue-50 rounded-lg">
                      ğŸ“„ Factures
                    </Link>
                    <Link href="/admin/finances/avoirs" onClick={closeMobileMenu} className="block py-2 px-4 text-sm text-gray-700 hover:bg-blue-50 rounded-lg">
                      ğŸ”´ Avoirs
                    </Link>
                    <Link href="/admin/finances/relances" onClick={closeMobileMenu} className="block py-2 px-4 text-sm text-gray-700 hover:bg-blue-50 rounded-lg">
                      ğŸ“§ Relances Automatiques
                    </Link>
                    <Link href="/admin/tarification" onClick={closeMobileMenu} className="block py-2 px-4 text-sm text-gray-700 hover:bg-blue-50 rounded-lg">
                      ğŸ’° Tarification
                    </Link>
                    <Link href="/admin/tresorerie" onClick={closeMobileMenu} className="block py-2 px-4 text-sm text-gray-700 hover:bg-blue-50 rounded-lg">
                      ğŸ¦ TrÃ©sorerie
                    </Link>
                    <Link href="/admin/finances/notes-frais" onClick={closeMobileMenu} className="block py-2 px-4 text-sm text-gray-700 hover:bg-blue-50 rounded-lg">
                      ğŸ’³ Notes de Frais
                    </Link>
                  </div>

                  {/* ComptabilitÃ© */}
                  <div className="border-t pt-2 mt-2">
                    <div className="text-xs font-semibold text-gray-500 px-4 mb-2">ğŸ“Š COMPTABILITÃ‰</div>
                    <Link href="/admin/comptabilite" onClick={closeMobileMenu} className="block py-2 px-4 text-sm text-gray-700 hover:bg-blue-50 rounded-lg font-medium">
                      ğŸ“Š Dashboard ComptabilitÃ©
                    </Link>
                    <Link href="/admin/comptabilite/plan-comptable" onClick={closeMobileMenu} className="block py-2 px-4 text-sm text-gray-700 hover:bg-blue-50 rounded-lg">
                      ğŸ“š Plan Comptable
                    </Link>
                    <Link href="/admin/comptabilite/journal" onClick={closeMobileMenu} className="block py-2 px-4 text-sm text-gray-700 hover:bg-blue-50 rounded-lg">
                      ğŸ“– Journal
                    </Link>
                    <Link href="/admin/comptabilite/grand-livre" onClick={closeMobileMenu} className="block py-2 px-4 text-sm text-gray-700 hover:bg-blue-50 rounded-lg">
                      ğŸ“— Grand Livre
                    </Link>
                    <Link href="/admin/comptabilite/balance" onClick={closeMobileMenu} className="block py-2 px-4 text-sm text-gray-700 hover:bg-blue-50 rounded-lg">
                      âš–ï¸ Balance
                    </Link>
                    <Link href="/admin/comptabilite/tva" onClick={closeMobileMenu} className="block py-2 px-4 text-sm text-gray-700 hover:bg-blue-50 rounded-lg">
                      ğŸ’¶ TVA
                    </Link>
                    <Link href="/admin/comptabilite/factures-fournisseurs" onClick={closeMobileMenu} className="block py-2 px-4 text-sm text-gray-700 hover:bg-blue-50 rounded-lg">
                      ğŸ“„ Factures Fournisseurs
                    </Link>
                  </div>

                  {/* Stock & Flotte */}
                  <div className="border-t pt-2 mt-2">
                    <div className="text-xs font-semibold text-gray-500 px-4 mb-2">ğŸ“¦ STOCK & FLOTTE</div>
                    <Link href="/admin/stock-flotte" onClick={closeMobileMenu} className="block py-2 px-4 text-sm text-gray-700 hover:bg-blue-50 rounded-lg">
                      ğŸ“Š Dashboard
                    </Link>
                    <Link href="/admin/stock-flotte/articles" onClick={closeMobileMenu} className="block py-2 px-4 text-sm text-gray-700 hover:bg-blue-50 rounded-lg">
                      ğŸ“¦ Articles
                    </Link>
                    <Link href="/admin/stock-flotte/mouvements" onClick={closeMobileMenu} className="block py-2 px-4 text-sm text-gray-700 hover:bg-blue-50 rounded-lg">
                      ğŸ“Š Mouvements
                    </Link>
                    <Link href="/admin/stock-flotte/equipements" onClick={closeMobileMenu} className="block py-2 px-4 text-sm text-gray-700 hover:bg-blue-50 rounded-lg">
                      ğŸš— Ã‰quipements
                    </Link>
                    <Link href="/admin/stock-flotte/bons-commande" onClick={closeMobileMenu} className="block py-2 px-4 text-sm text-gray-700 hover:bg-blue-50 rounded-lg">
                      ğŸ“‹ Bons Commande
                    </Link>
                  </div>
                </>
              )}

              {/* OpÃ©rations */}
              <div className="border-t pt-2 mt-2">
                <div className="text-xs font-semibold text-gray-500 px-4 mb-2">ğŸš€ OPÃ‰RATIONS</div>
                <Link href="/admin/calendrier" onClick={closeMobileMenu} className="block py-2 px-4 text-sm text-gray-700 hover:bg-blue-50 rounded-lg">
                  ğŸ“… Planning Interventions
                </Link>
                <Link href="/admin/nouvelle-intervention" onClick={closeMobileMenu} className="block py-2 px-4 text-sm text-gray-700 hover:bg-blue-50 rounded-lg">
                  â• Nouvelle Intervention
                </Link>
                <Link href="/admin/interventions" onClick={closeMobileMenu} className="block py-2 px-4 text-sm text-gray-700 hover:bg-blue-50 rounded-lg">
                  ğŸ“„ Liste Interventions
                </Link>
              </div>

              {/* ConformitÃ© */}
              <div className="border-t pt-2 mt-2">
                <div className="text-xs font-semibold text-gray-500 px-4 mb-2">ğŸ“ CONFORMITÃ‰</div>
                <Link href="/intranet/certifications" onClick={closeMobileMenu} className="block py-2 px-4 text-sm text-gray-700 hover:bg-blue-50 rounded-lg">
                  ğŸ“ Certifications
                </Link>
                <Link href="/intranet/extincteurs" onClick={closeMobileMenu} className="block py-2 px-4 text-sm text-gray-700 hover:bg-blue-50 rounded-lg">
                  ğŸ§¯ Extincteurs
                </Link>
              </div>

              {/* Site public */}
              <div className="border-t pt-2 mt-2">
                <Link href="/" onClick={closeMobileMenu} className="block py-3 px-4 text-yellow-600 hover:bg-yellow-50 rounded-lg font-medium">
                  ğŸŒ Site public
                </Link>
              </div>
            </div>
          </div>
        </>
      )}
    </header>
  )
}
